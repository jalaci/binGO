name = "ai-orchestrator"
main = "src/index.js"
compatibility_date = "2025-01-18"
workers_dev = true

# Replace with your account ID
account_id = "YOUR_ACCOUNT_ID"

# Durable Objects
[[durable_objects.bindings]]
name = "SESSION_DO"
class_name = "Session"
script_name = "ai-orchestrator"

# KV Namespaces
[[kv_namespaces]]
binding = "CACHE_KV"
id = "YOUR_CACHE_KV_ID"

[[kv_namespaces]]
binding = "CONFIG_KV"
id = "YOUR_CONFIG_KV_ID"

# Environment variables
[vars]
FAST_AGENT_URL = "http://localhost:8080/api/chat"
YOUR_API_URL = "http://localhost:3000/api"
QUALITY_THRESHOLD = "0.85"
MAX_ITERATIONS = "3"
PARALLEL_CONCURRENCY = "3"

# Production environment
[env.production]
name = "ai-orchestrator-prod"
route = { pattern = "ai-worker.yourdomain.com/*", zone_name = "yourdomain.com" }

[env.production.vars]
FAST_AGENT_URL = "https://your-fast-agent.com/mcp/"
YOUR_API_URL = "https://your-app.com/api"

# Secrets (bind via wrangler secret put or dashboard):
# - FAST_AGENT_KEY
# - N8N_SECRET  
# - HMAC_SECRET
# - N8N_WEBHOOK_QUICK
# - N8N_WEBHOOK_ASYNC
